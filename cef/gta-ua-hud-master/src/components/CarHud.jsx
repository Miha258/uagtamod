import React from 'react';
import { EventManager } from '..';
import PeopleHud from './PeopleHud';


class CarHud extends React.Component {
    constructor(props){
        super(props)
        this.state = {
            isActive: false,
            speed: 0,
            maxSpeed: 0,
            speedLine: 504,
            fuel: 0,
            maxFue: 0,
            fuelLine: 508
        }   
    }   

    componentDidMount(){
        EventManager.addHandler("setHudFuel", (fuel, maxFuel) => {
            console.log(fuel, maxFuel)
            this.setState({
                fuel,
                maxFuel,
                fuelLine: 508 + ((508/maxFuel) * fuel)
            })
        })
        EventManager.addHandler("setHudSpeed", (speed, maxSpeed) => {
            this.setState({
                speed,
                maxSpeed,
                speedLine: 504 + ((504/maxSpeed) * speed),
            })
        })
        EventManager.addHandler("setHudSpeedometerActive", toggle => {
            this.setState({
                isActive: toggle
            })
        })      
    }
    
    render(){
        return (
            <div>
                <PeopleHud />
                { this.state.isActive &&
                    <div>
                        <div className="hudspeed">
                            <div className="hudspeed__circle">
                                <svg
                                    className="hudspeed__speed-line"
                                    id="test"
                                    xmlns="http://www.w3.org/2000/svg"
                                    xmlnsXlink="http://www.w3.org/1999/xlink"
                                    viewBox="-4 -10 275 214"
                                    preserveAspectRatio="xMaxYMin meet"
                                >
                                    <path
                                        fillRule="evenodd"
                                        stroke="rgb(255, 255, 255)"
                                        strokeWidth="0.6vh"
                                        strokeLinecap="butt"
                                        strokeLinejoin="miter"
                                        opacity="0.4"
                                        fill="none"
                                        d="M60.340,185.660 C18.553,143.874 18.553,76.126 60.340,34.340 C102.126,-7.447 169.874,-7.447 211.660,34.340 C253.446,76.126 253.446,143.874 211.660,185.660 "
                                        style={{ zIndex: '5' }}
                                    ></path>
            
                                    <path
                                        id="hud-speedometer"
                                        fillRule="evenodd"
                                        stroke="rgba(47, 128, 237, 1)"
                                        strokeWidth="1vh"
                                        strokeLinecap="butt"
                                        strokeLinejoin="miter"
                                        opacity="1"
                                        fill="none"
                                        d="M60.340,185.660 C18.553,143.874 18.553,76.126 60.340,34.340 C102.126,-7.447 169.874,-7.447 211.660,34.340 C253.446,76.126 253.446,143.874 211.660,185.660 "
                                        style={{
                                            strokeDasharray: this.state.speedLine,
                                            strokeDashoffset: '504',
                                        }}
                                    ></path>
                                </svg>
            
                                <div className="hudspeed__speed">
                                    <h1 className="hudspeed__speed-text">{Math.round(this.state.speed)}</h1>
                                    <p className="hudspeed__speed-description">КМ/ГОД</p>
                                </div>
                                <div className="hudspeed__fuel">
                                    <div className="hudspeed__fuel-item">
                                        <p className="hudspeed__fuel-text">
                                            {this.state.fuel}
                                            <span>L</span>
                                        </p>
                                        <svg
                                            className="hudspeed__fuel-line"
                                            id="test"
                                            xmlns="http://www.w3.org/2000/svg"
                                            xmlnsXlink="http://www.w3.org/1999/xlink"
                                            width="6.5vh"
                                            height="6.4vh"
                                            viewBox="-4 -10 275 214"
                                            preserveAspectRatio="xMaxYMin meet"
                                        >
                                            <path
                                                fillRule="evenodd"
                                                stroke="rgb(255, 255, 255)"
                                                strokeWidth="0.6vh"
                                                strokeLinecap="butt"
                                                strokeLinejoin="miter"
                                                opacity="0.4"
                                                fill="none"
                                                d="M60.340,185.660 C18.553,143.874 18.553,76.126 60.340,34.340 C102.126,-7.447 169.874,-7.447 211.660,34.340 C253.446,76.126 253.446,143.874 211.660,185.660 "
                                            ></path>
            
                                            <path
                                                id="hud-speedometer"
                                                fillRule="evenodd"
                                                stroke="rgba(242, 201, 76, 1)"
                                                strokeWidth="1vh"
                                                strokeLinecap="butt"
                                                strokeLinejoin="miter"
                                                opacity="1"
                                                fill="none"
                                                d="M60.340,185.660 C18.553,143.874 18.553,76.126 60.340,34.340 C102.126,-7.447 169.874,-7.447 211.660,34.340 C253.446,76.126 253.446,143.874 211.660,185.660 "
                                                style={{
                                                    strokeDasharray: this.state.fuelLine,
                                                    strokeDashoffset: '508',
                                                }}
                                            ></path>
                                        </svg>
            
                                        <svg
                                            className="hudspeed__fuel-icon"
                                            width="9"
                                            height="9"
                                            viewBox="0 0 9 9"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                fillRule="evenodd"
                                                clipRule="evenodd"
                                                d="M6.7065 0.990227C6.68263 1.00246 6.51499 1.15998 6.33395 1.34028L6.00481 1.66807L6.31213 1.97512L6.61945 2.28217L6.93799 1.9644L7.25651 1.64665H7.41577C7.60241 1.64665 7.65682 1.62621 7.70817 1.53682C7.73654 1.48741 7.74051 1.45979 7.74072 1.31026C7.741 1.10627 7.71814 1.04403 7.62559 0.996886C7.57233 0.969761 7.54095 0.967811 7.1592 0.967898C6.81922 0.96797 6.74255 0.971754 6.7065 0.990227ZM5.33205 1.84726C5.30818 1.86223 5.25454 1.90944 5.21287 1.9522L5.13711 2.02991L5.69819 2.5899L6.25925 3.14986L6.36351 3.04252C6.47704 2.92565 6.48638 2.89934 6.45917 2.77323C6.45049 2.73294 5.60375 1.87481 5.53894 1.84059C5.48392 1.81155 5.3839 1.81478 5.33205 1.84726ZM1.40794 2.10053C1.14969 2.16357 0.925756 2.36969 0.837039 2.62605L0.803589 2.72267V5.22137V7.72006L0.837039 7.81668C0.918811 8.05298 1.09423 8.22953 1.34006 8.323L1.42571 8.35557L3.44398 8.35975C4.869 8.3627 5.48972 8.35923 5.55568 8.34797C5.85459 8.29691 6.11672 8.04795 6.18612 7.74919C6.20501 7.6679 6.20736 7.40193 6.204 5.73044L6.20012 3.8053L6.15116 3.70452C6.10598 3.61147 6.04754 3.54912 5.3916 2.89403C4.73205 2.23534 4.67371 2.18086 4.57972 2.13576L4.47844 2.08717L2.98101 2.08463C1.80746 2.08262 1.46722 2.08607 1.40794 2.10053ZM4.64491 3.37282L5.07162 3.7991L3.52356 3.79529L1.97549 3.79148L1.91038 3.75742C1.82145 3.7109 1.75591 3.64632 1.71044 3.56039C1.67835 3.49974 1.67223 3.46967 1.67223 3.37262C1.67223 3.27527 1.67833 3.24542 1.71105 3.18308C1.7324 3.14238 1.77922 3.08328 1.8151 3.05176C1.93721 2.94447 1.88755 2.94844 3.11854 2.94744L4.21821 2.94654L4.64491 3.37282ZM7.57374 3.24801C7.4971 3.29466 7.29614 3.5843 7.19397 3.79536C7.12912 3.92928 7.1261 3.94114 7.12662 4.05852C7.12708 4.1615 7.13369 4.19575 7.16743 4.26962C7.2184 4.38121 7.32998 4.49225 7.44436 4.54522C7.51889 4.57972 7.5496 4.58543 7.66138 4.58556C7.77736 4.5857 7.80188 4.58082 7.88563 4.5409C8.00481 4.48409 8.09393 4.39496 8.15122 4.27533C8.1905 4.19328 8.1962 4.16596 8.19643 4.05852C8.19668 3.94146 8.19347 3.92894 8.12906 3.79588C8.02237 3.57551 7.81594 3.28134 7.74074 3.24252C7.68465 3.21357 7.62721 3.21545 7.57374 3.24801ZM2.48331 4.76487C2.51435 4.78787 2.61776 4.88536 2.71312 4.98152L2.88652 5.15637H3.50186H4.11719L4.29059 4.98152C4.52008 4.7501 4.55748 4.72307 4.64838 4.72307C4.73339 4.72307 4.79436 4.75492 4.8351 4.82061C4.8701 4.87701 4.87346 4.9769 4.84234 5.03561C4.8303 5.05833 4.73535 5.16134 4.63135 5.26449L4.44227 5.45204V6.08074V6.70945L4.63135 6.89699C4.73535 7.00015 4.8303 7.10316 4.84234 7.12588C4.87067 7.17932 4.87036 7.27896 4.8417 7.33431C4.80841 7.39857 4.73461 7.43841 4.6489 7.43841C4.55784 7.43841 4.51995 7.4113 4.29782 7.18719L4.13169 7.01956H3.50188H2.87208L2.68422 7.20832C2.58089 7.31214 2.47876 7.40638 2.45727 7.41775C2.39999 7.44805 2.29166 7.44392 2.23554 7.4093C2.15418 7.35911 2.1194 7.2393 2.15729 7.13981C2.16579 7.11753 2.26345 7.00796 2.37431 6.89633L2.57591 6.69334V6.0811V5.46887L2.36705 5.25745C2.24208 5.13092 2.1542 5.03014 2.14825 5.00646C2.12978 4.93299 2.14996 4.83967 2.19448 4.79269C2.24658 4.7377 2.27691 4.72514 2.36034 4.72398C2.412 4.72327 2.43952 4.73243 2.48331 4.76487ZM3.00995 6.08815V6.58663L3.50547 6.58284L4.001 6.57904L4.0048 6.08435L4.00861 5.58967H3.50928H3.00995V6.08815Z"
                                                fill="white"
                                            />
                                        </svg>
                                    </div>
                                </div>
                                <div className="hudspeed__params">
                                    <svg
                                        width="17"
                                        height="16"
                                        viewBox="0 0 17 16"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fillRule="evenodd"
                                            clipRule="evenodd"
                                            d="M9.78172 1.0596C7.18833 2.97795 0.379855 8.10435 0.365173 8.14973C0.354431 8.18298 0.354431 8.23738 0.365173 8.2706C0.38332 8.32674 9.8694 15.4517 10.0786 15.5662C10.267 15.6695 10.2654 15.6845 10.2652 13.8576C10.2651 12.8028 10.253 12.176 10.2314 12.0996C10.213 12.0344 10.1594 11.9388 10.1124 11.8873C10.0655 11.8358 9.56222 11.4469 8.99414 11.023C8.42607 10.5991 7.96129 10.2314 7.96129 10.2059C7.96129 10.1653 8.4807 10.1577 12.2147 10.144L16.468 10.1284L16.5447 10.0409L16.6214 9.95339V8.21018V6.46697L16.5447 6.37945L16.468 6.29192L12.2147 6.27633C8.4807 6.26264 7.96129 6.25509 7.96129 6.21441C7.96129 6.18893 8.42607 5.82125 8.99414 5.39739C9.56222 4.9735 10.0655 4.58455 10.1124 4.53302C10.1594 4.48153 10.213 4.38599 10.2314 4.32073C10.2771 4.15941 10.278 0.961787 10.2325 0.878195C10.2143 0.845007 10.1791 0.817871 10.154 0.817871C10.129 0.817871 9.96147 0.926635 9.78172 1.0596Z"
                                            fill="white"
                                            fillOpacity="0.5"
                                        />
                                    </svg>
                                    <svg
                                        width="19"
                                        height="16"
                                        viewBox="0 0 19 16"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fillRule="evenodd"
                                            clipRule="evenodd"
                                            d="M5.77128 1.20042C5.45184 1.4101 5.18164 1.5903 5.17083 1.60081C5.16002 1.61136 5.30844 1.84933 5.50063 2.12963L5.85005 2.63927L4.69756 2.6482L3.54507 2.65709L3.53572 3.3754L3.52636 4.09371H4.68852H5.85067L5.50226 4.60187C5.31062 4.88138 5.16137 5.12199 5.17062 5.13656C5.19661 5.1776 6.36861 5.9313 6.3824 5.91585C6.46322 5.82513 7.88071 3.71444 7.91574 3.6326C7.97233 3.50047 7.97787 3.25716 7.92728 3.12407C7.88833 3.02162 6.39817 0.815709 6.36937 0.817873C6.35984 0.818583 6.09069 0.990741 5.77128 1.20042ZM11.7683 1.92255C11.3545 2.53107 10.9998 3.07175 10.9799 3.12407C10.9293 3.25716 10.9348 3.50047 10.9914 3.6326C11.0265 3.71444 12.4439 5.82513 12.5248 5.91585C12.5386 5.9313 13.7106 5.1776 13.7365 5.13656C13.7458 5.12199 13.5965 4.88138 13.4049 4.60187L13.0565 4.09371H14.2186H15.3808L15.3714 3.3754L15.3621 2.65709L14.2096 2.6482L13.0571 2.63927L13.4039 2.13348C13.5946 1.85532 13.7507 1.61998 13.7507 1.61052C13.7507 1.59098 12.6253 0.852757 12.5617 0.830583C12.5382 0.822402 12.1972 1.29169 11.7683 1.92255ZM4.04159 7.02026C3.81835 7.08729 3.61421 7.31505 3.5634 7.55384C3.53755 7.67522 3.52892 8.87134 3.53551 11.4131L3.54507 15.0965L3.64228 15.2579C3.69575 15.3466 3.80376 15.4607 3.88232 15.5114L4.02517 15.6036H5.01787H6.01057L6.15341 15.5114C6.23197 15.4607 6.33999 15.3466 6.39346 15.2579L6.49066 15.0965L6.50245 14.2784L6.51426 13.4604L7.37143 13.4503L8.22863 13.4402L8.37137 13.348C8.44986 13.2973 8.55785 13.1832 8.61132 13.0945L8.70852 12.9332L8.71916 11.4182C8.73129 9.68751 8.72457 9.62085 8.51366 9.38714C8.3049 9.15582 8.18084 9.13034 7.26407 9.13034H6.50799V8.42213C6.50799 7.57223 6.48297 7.43117 6.29525 7.22318C6.08448 6.98957 5.96683 6.96648 5.0029 6.96932C4.41166 6.97104 4.16136 6.98433 4.04159 7.02026ZM10.6952 7.02026C10.4763 7.08597 10.2692 7.31401 10.2184 7.54535C10.198 7.63807 10.1813 7.87179 10.1813 8.06473V8.41551L11.091 8.42747C11.9463 8.43876 12.0127 8.44417 12.2032 8.5181C12.5975 8.67119 12.9398 9.02822 13.0791 9.43176C13.1383 9.60327 13.1452 9.75958 13.1551 11.1472C13.1614 12.0314 13.1516 12.7752 13.1318 12.9146C13.051 13.483 12.66 13.9407 12.1017 14.1202C11.9697 14.1626 11.7334 14.1787 11.0519 14.1916L10.1725 14.2083L10.1881 14.6562C10.2025 15.0686 10.2112 15.1164 10.2984 15.2616C10.3505 15.3482 10.4573 15.4607 10.5359 15.5114L10.6787 15.6036H12.7804H14.882L15.0248 15.5114C15.1034 15.4607 15.2114 15.3466 15.2649 15.2579L15.3621 15.0965L15.3717 11.4131C15.3782 8.87134 15.3696 7.67522 15.3438 7.55384C15.2911 7.3062 15.0898 7.08746 14.8509 7.01827C14.5957 6.94434 10.9423 6.94606 10.6952 7.02026ZM0.582153 11.3106V14.9106H1.69108H2.80001V11.3106V7.71062H1.69108H0.582153V11.3106ZM16.1072 11.3106V14.9106H17.2161H18.325V11.3106V7.71062H17.2161H16.1072V11.3106ZM10.2071 9.15028C10.1929 9.16411 10.1813 10.1388 10.1813 11.3163V13.4571L11.0043 13.4564C11.7325 13.4557 11.8434 13.4484 11.966 13.3928C12.1418 13.3132 12.2423 13.2189 12.3298 13.0515C12.3963 12.9244 12.3992 12.8525 12.3992 11.3109C12.3992 9.93593 12.3914 9.68467 12.3455 9.57762C12.2769 9.41736 12.1746 9.31132 12.0007 9.22008C11.8721 9.15265 11.8029 9.14656 11.0474 9.13625C10.5994 9.13013 10.2212 9.13645 10.2071 9.15028Z"
                                            fill="white"
                                        />
                                    </svg>
                                    <svg
                                        width="13"
                                        height="16"
                                        viewBox="0 0 13 16"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fillRule="evenodd"
                                            clipRule="evenodd"
                                            d="M2.91715 3.55042L0.110718 6.28298V8.64751V11.012L0.217086 11.0276C0.275605 11.0361 0.441279 11.0594 0.585285 11.0793C0.89143 11.1215 1.51904 11.3169 1.81697 11.4628C2.87768 11.982 3.68804 12.8841 4.05185 13.9506C4.20859 14.41 4.26891 14.7246 4.29094 15.1973L4.30989 15.6036H8.49423H12.6786V8.21073V0.817871H9.20107H5.72358L2.91715 3.55042ZM11.5341 1.41558C11.7673 1.5287 11.9051 1.65731 12.0263 1.87502L12.1385 2.07657V4.25937V6.44218L12.0503 6.60492C11.9197 6.84605 11.8211 6.94527 11.592 7.06621L11.3858 7.17509H6.77103H2.15627L2.00126 7.10011C1.80257 7.00394 1.61065 6.81651 1.51475 6.62496C1.45698 6.50957 1.43885 6.41777 1.43771 6.23505C1.43486 5.775 1.31429 5.91678 3.64153 3.64334C4.78671 2.5246 5.78268 1.56917 5.85478 1.52013C6.14597 1.32211 6.03221 1.32913 8.83294 1.33674L11.3858 1.34366L11.5341 1.41558ZM6.24737 1.88311C6.19336 1.90711 5.21127 2.84237 4.06491 3.9614C2.22536 5.75716 1.97803 6.01008 1.95849 6.11533C1.91466 6.35117 2.05091 6.58981 2.26349 6.64972C2.34868 6.67375 3.72676 6.68124 6.84228 6.67464C11.2852 6.66527 11.2994 6.66505 11.3896 6.59953C11.4393 6.5634 11.5103 6.49425 11.5474 6.44584C11.614 6.35904 11.6149 6.32912 11.6149 4.25937C11.6149 2.18963 11.614 2.15971 11.5474 2.0729C11.5103 2.0245 11.4393 1.95535 11.3896 1.91922C11.3004 1.85437 11.2672 1.85341 8.82237 1.84647C6.78307 1.8407 6.32821 1.84717 6.24737 1.88311ZM3.49435 8.24948C3.67413 8.3012 3.94526 8.56517 3.99837 8.74021C4.08903 9.03898 4.02511 9.27718 3.79382 9.50238C3.56858 9.72168 3.48525 9.74028 2.72902 9.74028C1.97279 9.74028 1.88946 9.72168 1.66422 9.50238C1.43293 9.27718 1.36901 9.03898 1.45967 8.74021C1.50892 8.57789 1.7829 8.30167 1.94353 8.25238C2.10632 8.20244 3.32285 8.20015 3.49435 8.24948ZM2.02388 8.79881C1.97322 8.84811 1.94353 8.91343 1.94353 8.97551C1.94353 9.03758 1.97322 9.10291 2.02388 9.1522C2.10354 9.2298 2.10927 9.23043 2.72902 9.23043C3.34877 9.23043 3.3545 9.2298 3.43416 9.1522C3.48483 9.10291 3.51451 9.03758 3.51451 8.97551C3.51451 8.91343 3.48483 8.84811 3.43416 8.79881C3.3545 8.72122 3.34877 8.72058 2.72902 8.72058C2.10927 8.72058 2.10354 8.72122 2.02388 8.79881Z"
                                            fill="white"
                                            fillOpacity="0.5"
                                        />
                                    </svg>
                                    <svg
                                        width="17"
                                        height="16"
                                        viewBox="0 0 17 16"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fillRule="evenodd"
                                            clipRule="evenodd"
                                            d="M7.47896 1.0596C10.0724 2.97795 16.8808 8.10435 16.8955 8.14973C16.9062 8.18298 16.9062 8.23738 16.8955 8.2706C16.8774 8.32674 7.39128 15.4517 7.18213 15.5662C6.99367 15.6695 6.9953 15.6845 6.99552 13.8576C6.99561 12.8028 7.00766 12.176 7.02924 12.0996C7.0477 12.0344 7.10125 11.9388 7.14825 11.8873C7.19522 11.8358 7.69846 11.4469 8.26654 11.023C8.83461 10.5991 9.29939 10.2314 9.29939 10.2059C9.29939 10.1653 8.77998 10.1577 5.04602 10.144L0.792681 10.1284L0.715963 10.0409L0.639278 9.95339V8.21018V6.46697L0.715963 6.37945L0.792681 6.29192L5.04602 6.27633C8.77998 6.26264 9.29939 6.25509 9.29939 6.21441C9.29939 6.18893 8.83461 5.82125 8.26654 5.39739C7.69846 4.9735 7.19522 4.58455 7.14825 4.53302C7.10125 4.48153 7.0477 4.38599 7.02924 4.32073C6.9836 4.15941 6.98265 0.961787 7.02822 0.878195C7.04633 0.845007 7.08161 0.817871 7.10665 0.817871C7.13166 0.817871 7.29921 0.926635 7.47896 1.0596Z"
                                            fill="white"
                                        />
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        );
    }
}

export default CarHud;
